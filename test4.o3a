#   Test of OISC:3
#   GPL (C) 2022 McChuck
#   Print phrase, print query, accept input, print input, print phrase by subroutine, print pi * e, halt
#

/jump Z Print1              #   0   Cannot easily reference 0, so use as jump to main.
Print1: /push *Text1*       #   3
/exec WriteChar             #   6
/lit- 1 Text1*              #   9
/jump *Text1* Next1         #   12
/jump Z Print1              #   15

Next1: /call Z WriteCR      #   18
Print2: /push *Text2*       #   21
/exec WriteChar             #   24
/lit- 1 Text2*              #   27
/jump *Text2* Next2         #   30
/jump Z Print2              #   33

Next2: /exec ReadChar       #   36
Print3: /push *Text3*       #   39
/exec WriteChar             #   42
/lit- 1 Text3*              #   45
/jump *Text3* Next3         #   48
/jump Z Print3              #   51

Next3: /exec WriteChar      #   54
/call Z WriteCR             #   57
/sub Text4* temp            #   60
temp Print*                 #   63
/sub temp                   #   66  zero out temp
/call Z Print               #   69
/push pi                    #   72
/push e                     #   75
/exec Multiply              #   78
/exec WriteNum              #   81
/call Z WriteCR             #   84

/ret                        #   87  empty stack = Halt
# /jump *M1                 #   87  negative = Halt

WriteCR: /push CR           #   90  Subroutine: print carriage return
/exec WriteChar             #   93
/ret                        #   96

Print: /push *Print*        #   99  Subroutine: print <=0 delimited string
/exec WriteChar             #   102
/lit- 1 Print*              #   105
/jump *Print* PrintEnd      #   108
/jump Z Print               #   111
PrintEnd: Print*            #   114
/ret                        #   117


% --NEGATIVE--: --NEGATIVE--

text1: 'Good morning, starshine.  The earth says, "Hello!"' 10 -1
text2: "Type any character > " -1
text3: 10 "You typed: " -1
text4: 10 "pi * e = " -1
CR: 10
Space: 32
M1: -1
P1: 1
# Z: 0                      #   Macro will add "Z: 0" if it is not present
temp: 0
Text1*: text1
Text2*: text2
Text3*: text3
Text4*: text4
pi: 3.14159
e: 2.718281828
WriteChar: -1
ReadChar: 1
WriteNum: -2
ReadDigit: 2
inputA: 0
Multiply: 12
Print*: 0
Garbage: 111 2 3 4 5
6 7 8

